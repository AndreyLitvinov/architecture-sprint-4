# Планирование: анализ, идентификация проблем и поиск решений

### Существующие и потенциальные проблемы

#### Выпуск версий
- длительность выпусков релизов
- отсутствие автоматического тестирования
- ручной деплой в prod и release окружение

#### Производительность/отказоустойчивость
- базы данных имеют один инстанс, который работает на запись и на чтение
- каждое приложение имеет по одному инстансу, нет масштабирования
- долгая загрузка дашбордов системы MES

#### Стабильность
- по какой-то причине на каком-то этапе заказы теряются (например в очередях, между сервисами)
- отсутствует система контроля/нотификации заказов которые обрабатываются дольше предполагаемого времени


### Инициативы (в порядке приоритета)

- внедрение мониторинга, трейсинга, логирования для выявления проблем системы (с нотификацией о проблемах) - это позволит оперативно реагировать на проблемы в системе и локализовать проблемные места
- внедрение кеширования для системы MES, в частности для списка заказов
- развертывание репликаций для БД и очередей
- настроить автоматический деплой в prod и release окружение
- внедрение автотестов
    - нанять автотестировщика от уровня middle, он сможет настроить инфраструктуру автотестов и сопроводить ручного тестировщика в его пути к автотестированию
    - внедрение автотестов в CI/CD
- отделение расчета стоимости заказа из системы MES в отдельный сервис
    - позволит масштабировать этот сервис под нагрузку
    - за счет такого подхода реализуется асинхронный расчет стоимости
- доработать сервисы под возможности горизонтального масштабирования

### Приоритеты
#### Целевая архитектура через полгода

- внедрен мониторинг и логирование сервисов и трейсинг заказов
- реализована настройка репликаций БД и очереди
- кеширование списка заказов системы MES
- CI/CD доработан под развертывание всех окружений и запуск автотестов
- критически важные части системы покрыты автотестами
- сервис расчета стоимости выделен из MES с возможностью горизонтального масштабирования и взаимодействия с остальными сервисами через очередь

#### Три пункта из инициатив

- внедрить мониторинг и трейссейровку
- репликация БД и очередей
- кеширование списка заказов системы MES